<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Insta</title>

</head>
<body>

<h2>Add Facebook Login to your webpage</h2>

<p id="profile"></p>
<script>
    (function (d, s, id) {
        let js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    window.fbAsyncInit = function () {
        <!-- Initialize the SDK with your app and the Graph API version for your app -->
        FB.init({
            appId: '276749995452523',
            xfbml: true,
            version: 'v19.0'
        });
        <!-- If you are logged in, automatically get your name and email adress, your public profile information -->
        FB.login(function (response) {
            let page_id;
            let ig_user_id
            if (response.authResponse) {
                FB.api('/me', {fields: 'name, email'}, function (response) {
                    document.getElementById("profile").innerHTML = "Good to see you, " + response.name + ". i see your email address is " + response.email
                });
                FB.api('/me/accounts', 'GET', {}, function (response) {
                    page_id = response.data.find(isFSV).id;
                    console.log("page id: " + page_id);
                    FB.api('/' + page_id, 'GET', {fields: 'instagram_business_account'}, function (response) {
                        ig_user_id = response.instagram_business_account.id;
                        console.log("IG user id: " + ig_user_id);
                        FB.api('/' + ig_user_id + '/media', 'GET', {}, function (response) {
                            // ig_user_id = response.instagram_business_account.id;
                            console.log(response);
                        });
                    });
                });


            }
        });

    };

    function isFSV(itemName) {
        return itemName.Name = "ConnectApp";
    }
</script>
</body>
</html>